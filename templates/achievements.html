{% extends "base.html" %}

{% set title = "Achievements" %}


<body>
{% block content %}
    <button id="create_achievement_button">Create Achievement</button>
    <button id="hide_create_achievement_button" hidden>Hide</button>
    <div id="create_achievement" class="create_achievement" hidden>
        <form action="{{ url('add_achievement') }}" method="post">
            <p>Group</p>
            <select name="select_group" id="select_group">
                {% for i in group %}
                    <option value="{{ i.group_id }}">{{ i.group_name }}</option>
                {% endfor %}
            </select>
            <p id="service_p" hidden>Service</p>
            <select name="select_service" id="select_service" hidden>
                <option value="">None</option>
            </select>
            <p>Aggregation</p>
            <select name="select_aggregation" id="select_aggregation">
                <option value="">None</option>
            </select>
            <p>Parameter</p>
            <select name="select_parameter" id="select_parameter">
                <option value="">None</option>
            </select>
            <p>Value</p>
            <input id="value" name="value" type="text" value="" placeholder="value"/>
            <p>Name</p>
            <input id="name" name="name" type="text" value="" placeholder="name"/>
            <p>Description</p>
            <input id="description" name="description" type="text" value="" placeholder="description"/>
            <p id="coords_p" hidden>Coordinates</p>
            <input id="coords" name="coords" type="text" value="" placeholder="coordinates" hidden />
            <p id="radius_p" hidden>Radius</p>
            <input id="radius" name="radius" type="text" value="" placeholder="radius in km" hidden/>
            <button type="submit">Send</button>
        </form>
    </div>
    <br>
    <div>
    {% if achievements_get %}
    <p> Now U have been reached this achievements: </p>
        <br>
    {% for achievement in achievements_get %}
        <a href="{{ '/achievement/%s'%achievement.achievement_id }}"><p>{{ achievement.name }} </a> : {{ achievement.description }}</p>
        <p>{{ achievement.sphere_name }}: {{ achievement.subsphere_name }}</p>
    {% endfor %}
    {% endif %}
    </div>
    <br>
    <div>
    {% if achievements_my %}
    <p> Now U have been created this achievements: </p>
        <br>
    {% for achievement in achievements_my %}
        <div><a href="{{ '/achievement/%s'%achievement.achievement_id }}"><p>{{ achievement.name }} </a>: {{ achievement.description }}</p>
            <p>{{ achievement.sphere_name }}: {{ achievement.subsphere_name }}</p>
            {% if achievement.achievement_qr %}
                <figure class="image is-128x128">
                    <img src="{{ url('static', filename='QR/'+achievement.achievement_qr + '.png') }}">
                </figure>
            {% endif %}
        </div>
    {% endfor %}
    {% endif %}
    </div>
    <br>
    <div>
    {% if achievements_sug %}
    <p> Recommended achievements: </p>
    <br>
    {% for achievement in achievements_sug %}
        {% if achievement.new == True %}
            <a href="{{ '/achievement/%s'%achievement.achievement_id }}"><p>{{ achievement.title }}</a> : {{ achievement.description }}. <a href="/user/{{ achievement.user_id }}">{{ achievement.name }} {{ achievement.surname }}</a>
            <p>{{ achievement.sphere_name }}: {{ achievement.subsphere_name }}</p>
            {{ achievement.created_date }} new</p>
        {% else %}
            <a href="{{ '/achievement/%s'%achievement.achievement_id }}"><p>{{ achievement.title }} </a>: {{ achievement.description }}. <a href="/user/{{ achievement.user_id }}">{{ achievement.name }} {{ achievement.surname }}</a>
            <p>{{ achievement.sphere_name }}: {{ achievement.subsphere_name }}</p>
            {{ achievement.created_date }}</p>
        {% endif %}
    {% endfor %}
    {% endif %}
    </div>
{% endblock %}
</body>